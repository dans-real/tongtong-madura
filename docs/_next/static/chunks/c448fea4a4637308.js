(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79474,(e,r,t)=>{"use strict";var a=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;t.c=function(e){return a.H.useMemoCache(e)}},932,(e,r,t)=>{"use strict";r.exports=e.r(79474)},18566,(e,r,t)=>{r.exports=e.r(76562)},95873,e=>{"use strict";var r=e.i(932),t=e.i(71645);e.i(51718);var a=e.i(18357),l=e.i(59141);function d(){let e,d,o,s=(0,r.c)(5),[n,i]=(0,t.useState)(null),[u,c]=(0,t.useState)(!0);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=(0,a.onAuthStateChanged)(l.auth,e=>{i(e),c(!1)});return()=>e()},d=[],s[0]=e,s[1]=d):(e=s[0],d=s[1]),(0,t.useEffect)(e,d),s[2]!==u||s[3]!==n?(o={user:n,loading:u},s[2]=u,s[3]=n,s[4]=o):o=s[4],o}e.s(["useAuth",()=>d])},59874,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(18566),l=e.i(95873),d=e.i(59141);e.i(36180);var o=e.i(98925);e.i(61086);var s=e.i(27215);function n(){let e=(0,a.useRouter)(),{user:n,loading:i}=(0,l.useAuth)(),[u,c]=(0,t.useState)([]),[m,b]=(0,t.useState)(!1),[x,h]=(0,t.useState)(null),[p,g]=(0,t.useState)(null),[f,w]=(0,t.useState)(""),[j,v]=(0,t.useState)(""),[N,k]=(0,t.useState)(""),[y,B]=(0,t.useState)(""),[S,A]=(0,t.useState)(""),[T,C]=(0,t.useState)(""),[E,_]=(0,t.useState)(!1);(0,t.useEffect)(()=>{i||n||e.push("/admin")},[n,i,e]),(0,t.useEffect)(()=>{if(!n)return;let e=(0,o.query)((0,o.collection)(d.db,"explore"),(0,o.orderBy)("createdAt","desc")),r=(0,o.onSnapshot)(e,e=>{let r=[];e.forEach(e=>{r.push({id:e.id,...e.data()})}),c(r)});return()=>r()},[n]);let U=()=>{g(null),w(""),v(""),k(""),B(""),A(""),C(""),b(!1),h(null)},R=async e=>{try{let r=Date.now(),t=e.name.replace(/[^a-zA-Z0-9.]/g,"_"),a=`explore/${r}_${t}`,l=(0,s.ref)(d.storage,a),o=await (0,s.uploadBytes)(l,e);return await (0,s.getDownloadURL)(o.ref)}catch(e){if(console.error("Upload error:",e),"storage/unauthorized"===e.code)throw Error("Firebase Storage belum aktif. Aktifkan dulu di Firebase Console.");throw Error(e.message||"Gagal upload gambar")}},D=async e=>{if(e.preventDefault(),!m&&!p)return void alert("Pilih gambar terlebih dahulu");_(!0);try{let e=j;if(p)try{e=await R(p)}catch(e){alert(`âŒ Gagal upload gambar: ${e.message}`),_(!1);return}if(m&&x){let r=(0,o.doc)(d.db,"explore",x),t={title:N,subJudul:y,informasi:S,referensi:T,updatedAt:o.Timestamp.now()};p&&(t.imageUrl=e),await (0,o.updateDoc)(r,t),alert("âœ… Konten berhasil diupdate!")}else await (0,o.addDoc)((0,o.collection)(d.db,"explore"),{imageUrl:e,title:N,subJudul:y,informasi:S,referensi:T,createdAt:o.Timestamp.now(),updatedAt:o.Timestamp.now()}),alert("âœ… Konten berhasil ditambahkan!");U()}catch(e){console.error("Error saving content:",e),alert("âŒ Error menyimpan konten")}finally{_(!1)}},G=async e=>{if(confirm("Hapus konten ini?"))try{await (0,o.deleteDoc)((0,o.doc)(d.db,"explore",e)),alert("âœ… Konten berhasil dihapus!")}catch(e){alert("âŒ Gagal menghapus konten")}};return i||!n?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-redBrown-950 text-white",children:"Loading..."}):(0,r.jsx)("div",{className:"min-h-screen bg-redBrown-950 p-8",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Kelola Konten Explore"}),(0,r.jsx)("button",{onClick:()=>e.push("/admin"),className:"px-4 py-2 bg-redBrown-800 text-white rounded-lg hover:bg-redBrown-700 border-2 border-redBrown-600",children:"â† Kembali"})]}),(0,r.jsxs)("div",{className:"bg-redBrown-900/80 border-2 border-amber-500/50 rounded-2xl p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:m?"âœï¸ Edit Artikel":"âž• Tambah Artikel Baru"}),(0,r.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-amber-300 mb-2",children:"Foto Artikel *"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let r=e.target.files?.[0];if(r){if(r.size>0xa00000){alert("âŒ File terlalu besar! Maksimal 10MB"),e.target.value="";return}if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(r.type)){alert("âŒ Format file tidak didukung! Gunakan: JPG, PNG, WebP"),e.target.value="";return}g(r);let t=new FileReader;t.onloadend=()=>{w(t.result)},t.readAsDataURL(r)}},className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-maduraGold file:text-redBrown-950 file:font-bold hover:file:bg-amber-400"}),f&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("img",{src:f,alt:"Preview",className:"w-full max-w-md h-48 object-cover rounded-lg border-2 border-amber-500/50"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-amber-300 mb-2",children:"Judul Artikel *"}),(0,r.jsx)("input",{type:"text",value:N,onChange:e=>k(e.target.value),required:!0,className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white focus:border-emerald-400 focus:outline-none",placeholder:"Contoh: Sejarah Tong-Tong Madura"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-amber-300 mb-2",children:"Sub Judul (Opsional)"}),(0,r.jsx)("input",{type:"text",value:y,onChange:e=>B(e.target.value),className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white focus:border-emerald-400 focus:outline-none",placeholder:"Contoh: Alat Musik Tradisional yang Unik"}),(0,r.jsx)("p",{className:"text-xs text-redBrown-400 mt-1",children:"ðŸ’¡ Sub judul akan ditampilkan dengan font lebih besar di dalam konten artikel"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-amber-300 mb-2",children:"Informasi (Konten Artikel) *"}),(0,r.jsx)("textarea",{value:S,onChange:e=>A(e.target.value),required:!0,rows:12,className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white focus:border-emerald-400 focus:outline-none",placeholder:"Tulis konten artikel lengkap di sini..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-amber-300 mb-2",children:"Referensi / Sumber *"}),(0,r.jsx)("textarea",{value:T,onChange:e=>C(e.target.value),required:!0,rows:4,className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white focus:border-emerald-400 focus:outline-none",placeholder:"Daftar sumber/referensi, pisahkan dengan enter"})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"submit",disabled:E,className:"px-8 py-3 bg-maduraGold text-redBrown-950 font-bold rounded-lg hover:bg-amber-400 border-2 border-amber-400 shadow-lg shadow-maduraGold/30 disabled:opacity-50",children:E?"â³ Uploading...":m?"ðŸ’¾ Update Artikel":"âž• Add Artikel"}),m&&(0,r.jsx)("button",{type:"button",onClick:U,className:"px-6 py-3 bg-redBrown-700 text-white font-semibold rounded-lg hover:bg-redBrown-600 border-2 border-redBrown-500",children:"âŒ Batal"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["ðŸ“š Daftar Artikel (",u.length,")"]}),0===u.length?(0,r.jsx)("div",{className:"text-center py-12 bg-redBrown-900/50 border-2 border-redBrown-700/50 rounded-xl",children:(0,r.jsx)("p",{className:"text-redBrown-300",children:"Belum ada artikel. Tambahkan artikel pertama di atas."})}):u.map(e=>(0,r.jsx)("div",{className:"bg-redBrown-900/80 border-2 border-emerald-600/30 rounded-xl p-5 hover:border-emerald-500/50 transition-all",children:(0,r.jsxs)("div",{className:"flex gap-5",children:[(0,r.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-40 h-40 object-cover rounded-lg border-2 border-emerald-500/50 shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),e.subJudul&&(0,r.jsxs)("h4",{className:"text-base font-semibold text-emerald-400 mb-2",children:["ðŸ“Œ ",e.subJudul]}),(0,r.jsx)("p",{className:"text-sm text-redBrown-300 line-clamp-3 mb-3 flex-1",children:e.informasi}),(0,r.jsxs)("div",{className:"text-xs text-redBrown-400 mb-3",children:[(0,r.jsx)("strong",{children:"Referensi:"})," ",e.referensi.substring(0,100),"..."]}),(0,r.jsxs)("div",{className:"flex gap-2 pt-2 border-t border-redBrown-700/50",children:[(0,r.jsx)("button",{onClick:()=>{v(e.imageUrl),w(e.imageUrl),k(e.title),B(e.subJudul||""),A(e.informasi),C(e.referensi),b(!0),h(e.id),window.scrollTo({top:0,behavior:"smooth"})},className:"px-4 py-2 bg-emerald-500 text-white text-sm font-semibold rounded hover:bg-emerald-600 border-2 border-emerald-400",children:"âœï¸ Edit"}),(0,r.jsx)("button",{onClick:()=>G(e.id),className:"px-4 py-2 bg-red-600 text-white text-sm font-semibold rounded hover:bg-red-700 border-2 border-red-500",children:"ðŸ—‘ï¸ Delete"})]})]})]})},e.id))]})]})})}e.s(["default",()=>n])}]);