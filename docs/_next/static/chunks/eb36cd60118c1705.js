(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79474,(e,r,t)=>{"use strict";var a=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;t.c=function(e){return a.H.useMemoCache(e)}},932,(e,r,t)=>{"use strict";r.exports=e.r(79474)},18566,(e,r,t)=>{r.exports=e.r(76562)},95873,e=>{"use strict";var r=e.i(932),t=e.i(71645);e.i(51718);var a=e.i(18357),s=e.i(59141);function i(){let e,i,d,n=(0,r.c)(5),[o,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=(0,a.onAuthStateChanged)(s.auth,e=>{l(e),u(!1)});return()=>e()},i=[],n[0]=e,n[1]=i):(e=n[0],i=n[1]),(0,t.useEffect)(e,i),n[2]!==c||n[3]!==o?(d={user:o,loading:c},n[2]=c,n[3]=o,n[4]=d):d=n[4],d}e.s(["useAuth",()=>i])},49534,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(18566),s=e.i(95873),i=e.i(59141);e.i(36180);var d=e.i(98925);function n(){let e=(0,a.useRouter)(),{user:n,loading:o}=(0,s.useAuth)(),[l,c]=(0,t.useState)([]),[u,m]=(0,t.useState)(!1),[b,x]=(0,t.useState)(null),[h,p]=(0,t.useState)(""),[g,f]=(0,t.useState)(""),[v,w]=(0,t.useState)("basic"),[j,N]=(0,t.useState)([{id:"1",question:"",options:[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}]}]);(0,t.useEffect)(()=>{o||n||e.push("/admin")},[n,o,e]),(0,t.useEffect)(()=>{if(!n)return;let e=(0,d.query)((0,d.collection)(i.db,"quizzes"),(0,d.orderBy)("createdAt","desc")),r=(0,d.onSnapshot)(e,e=>{let r=[];e.forEach(e=>{r.push({id:e.id,...e.data()})}),c(r)});return()=>r()},[n]);let y=()=>{p(""),f(""),w("basic"),N([{id:"1",question:"",options:[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}]}]),m(!1),x(null)},C=async e=>{for(let r of(e.preventDefault(),j)){if(!r.question.trim())return void alert("Semua pertanyaan harus diisi");if(r.options.some(e=>!e.text.trim()))return void alert("Semua opsi jawaban harus diisi");if(!r.options.some(e=>e.isCorrect))return void alert(`Pertanyaan "${r.question}" belum memiliki jawaban yang benar`)}try{let e={slug:h,title:g,level:v,questions:j,updatedAt:d.Timestamp.now()};u&&b?(await (0,d.updateDoc)((0,d.doc)(i.db,"quizzes",b),e),alert("Quiz berhasil diupdate!")):(await (0,d.addDoc)((0,d.collection)(i.db,"quizzes"),{...e,createdAt:d.Timestamp.now()}),alert("Quiz berhasil ditambahkan!")),y()}catch(e){console.error("Error saving quiz:",e),alert("Gagal menyimpan quiz")}},B=async e=>{if(confirm("Hapus quiz ini?"))try{await (0,d.deleteDoc)((0,d.doc)(i.db,"quizzes",e)),alert("Quiz berhasil dihapus!")}catch(e){alert("Gagal menghapus quiz")}};return o||!n?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-redBrown-950 text-white",children:"Loading..."}):(0,r.jsx)("div",{className:"min-h-screen bg-redBrown-950 p-8",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Kelola Quiz"}),(0,r.jsx)("button",{onClick:()=>e.push("/admin"),className:"px-4 py-2 bg-redBrown-800 text-white rounded-lg hover:bg-redBrown-700 border-2 border-redBrown-600",children:"â† Kembali"})]}),(0,r.jsxs)("div",{className:"bg-redBrown-900/80 border-2 border-amber-500/50 rounded-2xl p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:u?"âœï¸ Edit Quiz":"â• Tambah Quiz Baru"}),(0,r.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-amber-300 mb-2",children:"Judul Quiz *"}),(0,r.jsx)("input",{type:"text",value:g,onChange:e=>f(e.target.value),required:!0,className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white focus:border-amber-400 focus:outline-none",placeholder:"Contoh: Quiz Sejarah Madura"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-amber-300 mb-2",children:"Slug (URL) *"}),(0,r.jsx)("input",{type:"text",value:h,onChange:e=>p(e.target.value.toLowerCase().replace(/\s+/g,"-")),required:!0,className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white focus:border-amber-400 focus:outline-none",placeholder:"quiz-sejarah-madura"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-amber-300 mb-2",children:"Level Kesulitan *"}),(0,r.jsxs)("select",{value:v,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white focus:border-amber-400 focus:outline-none",children:[(0,r.jsx)("option",{value:"basic",children:"ğŸŸ¢ Basic (Mudah)"}),(0,r.jsx)("option",{value:"medium",children:"ğŸŸ¡ Medium (Sedang)"}),(0,r.jsx)("option",{value:"advanced",children:"ğŸ”´ Advanced (Susah)"})]})]}),(0,r.jsx)("hr",{className:"border-amber-500/30"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-amber-300",children:["Pertanyaan (",j.length,")"]}),(0,r.jsx)("button",{type:"button",onClick:()=>{let e=(j.length+1).toString();N([...j,{id:e,question:"",options:[{id:"1",text:"",isCorrect:!1},{id:"2",text:"",isCorrect:!1},{id:"3",text:"",isCorrect:!1},{id:"4",text:"",isCorrect:!1}]}])},className:"px-4 py-2 bg-amber-500 text-white font-semibold rounded-lg hover:bg-amber-600 border-2 border-amber-400",children:"+ Tambah Pertanyaan"})]}),j.map((e,t)=>(0,r.jsxs)("div",{className:"bg-redBrown-800/60 border-2 border-amber-600/30 rounded-xl p-5 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-amber-200 mb-2",children:["Pertanyaan ",t+1," *"]}),(0,r.jsx)("textarea",{value:e.question,onChange:r=>{var t,a;return t=e.id,a=r.target.value,void N(j.map(e=>e.id===t?{...e,question:a}:e))},required:!0,rows:2,className:"w-full px-4 py-2 bg-redBrown-700 border-2 border-redBrown-500 rounded-lg text-white focus:border-amber-400 focus:outline-none",placeholder:"Tuliskan pertanyaan di sini..."})]}),j.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>{var r;return r=e.id,void(j.length<=1?alert("Quiz harus memiliki minimal 1 pertanyaan"):N(j.filter(e=>e.id!==r)))},className:"px-3 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700 border-2 border-red-500",children:"ğŸ—‘ï¸ Hapus"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs text-amber-200 font-medium",children:"Pilihan Jawaban (pilih 1 jawaban benar):"}),e.options.map((t,a)=>(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("input",{type:"radio",name:`correct-${e.id}`,checked:t.isCorrect,onChange:()=>{var r,a;return r=e.id,a=t.id,void N(j.map(e=>e.id===r?{...e,options:e.options.map(e=>({...e,isCorrect:e.id===a}))}:e))},className:"w-5 h-5 accent-green-500 cursor-pointer",title:"Tandai sebagai jawaban benar"}),(0,r.jsx)("input",{type:"text",value:t.text,onChange:r=>{var a,s,i;return a=e.id,s=t.id,i=r.target.value,void N(j.map(e=>e.id===a?{...e,options:e.options.map(e=>e.id===s?{...e,text:i}:e)}:e))},required:!0,className:`flex-1 px-3 py-2 rounded-lg text-white focus:outline-none ${t.isCorrect?"bg-green-700/50 border-2 border-green-500":"bg-redBrown-700 border-2 border-redBrown-500 focus:border-amber-400"}`,placeholder:`Opsi ${String.fromCharCode(65+a)}`})]},t.id))]})]},e.id))]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,r.jsx)("button",{type:"submit",className:"px-8 py-3 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600 border-2 border-amber-400 shadow-lg shadow-amber-400/30",children:u?"ğŸ’¾ Update Quiz":"â• Simpan Quiz"}),u&&(0,r.jsx)("button",{type:"button",onClick:y,className:"px-6 py-3 bg-redBrown-700 text-white font-semibold rounded-lg hover:bg-redBrown-600 border-2 border-redBrown-500",children:"âŒ Batal"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["ğŸ“‹ Daftar Quiz (",l.length,")"]}),0===l.length?(0,r.jsx)("div",{className:"text-center py-12 bg-redBrown-900/50 border-2 border-redBrown-700/50 rounded-xl",children:(0,r.jsx)("p",{className:"text-redBrown-300",children:"Belum ada quiz. Silakan tambahkan quiz baru di atas."})}):l.map(e=>(0,r.jsx)("div",{className:"bg-redBrown-900/80 border-2 border-amber-600/30 rounded-xl p-5 hover:border-amber-500/50 transition-all",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,r.jsx)("span",{className:"text-xs bg-amber-500/20 border border-amber-500/50 px-3 py-1 rounded-full text-amber-300 font-semibold",children:"basic"===e.level?"ğŸŸ¢ Mudah":"medium"===e.level?"ğŸŸ¡ Sedang":"ğŸ”´ Susah"}),(0,r.jsxs)("span",{className:"text-xs bg-white/10 px-3 py-1 rounded-full text-redBrown-300",children:[e.questions?.length||0," pertanyaan"]}),(0,r.jsxs)("span",{className:"text-xs text-redBrown-400",children:["/",e.slug]})]}),e.questions&&e.questions.length>0&&(0,r.jsxs)("div",{className:"text-sm text-redBrown-300 space-y-1",children:[(0,r.jsx)("p",{className:"font-semibold text-amber-300",children:"Preview Pertanyaan:"}),(0,r.jsxs)("p",{className:"line-clamp-2",children:["1. ",e.questions[0].question]})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>{p(e.slug),f(e.title),w(e.level),N(e.questions||[]),m(!0),x(e.id),window.scrollTo({top:0,behavior:"smooth"})},className:"px-4 py-2 bg-amber-500 text-white text-sm font-semibold rounded hover:bg-amber-600 border-2 border-amber-400",children:"âœï¸ Edit"}),(0,r.jsx)("button",{onClick:()=>B(e.id),className:"px-4 py-2 bg-red-600 text-white text-sm font-semibold rounded hover:bg-red-700 border-2 border-red-500",children:"ğŸ—‘ï¸ Hapus"})]})]})},e.id))]})]})})}e.s(["default",()=>n])}]);