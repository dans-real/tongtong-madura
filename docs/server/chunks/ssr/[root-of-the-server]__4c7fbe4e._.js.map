{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../src/lib/useAuth.ts","../../../../src/app/admin/regions/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { User, onAuthStateChanged } from 'firebase/auth';\r\nimport { auth } from './firebase';\r\n\r\nexport function useAuth() {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n            setUser(user);\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    return { user, loading };\r\n}\r\n","\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/lib/useAuth';\r\nimport { db } from '@/lib/firebase';\r\nimport {\r\n    collection,\r\n    doc,\r\n    setDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    onSnapshot,\r\n    Timestamp\r\n} from 'firebase/firestore';\r\n\r\ninterface Region {\r\n    id: string;\r\n    slug: string;\r\n    name: string;\r\n    shortDescription: string;\r\n    history: string;\r\n    uniqueness: string;\r\n    coordinates?: { lat: number; lng: number };\r\n}\r\n\r\nexport default function RegionsAdminPage() {\r\n    const router = useRouter();\r\n    const { user, loading } = useAuth();\r\n    const [regions, setRegions] = useState<Region[]>([]);\r\n    const [editingId, setEditingId] = useState<string | null>(null);\r\n\r\n    // Form state\r\n    const [slug, setSlug] = useState('');\r\n    const [name, setName] = useState('');\r\n    const [shortDescription, setShortDescription] = useState('');\r\n    const [history, setHistory] = useState('');\r\n    const [uniqueness, setUniqueness] = useState('');\r\n\r\n    useEffect(() => {\r\n        if (!loading && !user) {\r\n            router.push('/admin');\r\n        }\r\n    }, [user, loading, router]);\r\n\r\n    useEffect(() => {\r\n        if (!user) return;\r\n\r\n        const unsubscribe = onSnapshot(collection(db, 'regions'), (snapshot) => {\r\n            const loadedRegions: Region[] = [];\r\n            snapshot.forEach((doc) => {\r\n                loadedRegions.push({ id: doc.id, ...doc.data() } as Region);\r\n            });\r\n            setRegions(loadedRegions);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, [user]);\r\n\r\n    const resetForm = () => {\r\n        setSlug('');\r\n        setName('');\r\n        setShortDescription('');\r\n        setHistory('');\r\n        setUniqueness('');\r\n        setEditingId(null);\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            const regionData = {\r\n                slug,\r\n                name,\r\n                shortDescription,\r\n                history,\r\n                uniqueness,\r\n                updatedAt: Timestamp.now()\r\n            };\r\n\r\n            if (editingId) {\r\n                await updateDoc(doc(db, 'regions', editingId), regionData);\r\n                alert('Region updated!');\r\n            } else {\r\n                await setDoc(doc(db, 'regions', slug), {\r\n                    ...regionData,\r\n                    createdAt: Timestamp.now()\r\n                });\r\n                alert('Region added!');\r\n            }\r\n            resetForm();\r\n        } catch (error) {\r\n            console.error('Error saving region:', error);\r\n            alert('Error saving region');\r\n        }\r\n    };\r\n\r\n    const handleEdit = (region: Region) => {\r\n        setSlug(region.slug);\r\n        setName(region.name);\r\n        setShortDescription(region.shortDescription);\r\n        setHistory(region.history);\r\n        setUniqueness(region.uniqueness);\r\n        setEditingId(region.id);\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm('Delete this region?')) return;\r\n\r\n        try {\r\n            await deleteDoc(doc(db, 'regions', id));\r\n            alert('Region deleted!');\r\n        } catch (error) {\r\n            console.error('Error deleting region:', error);\r\n            alert('Error deleting region');\r\n        }\r\n    };\r\n\r\n    if (loading || !user) {\r\n        return <div className=\"min-h-screen flex items-center justify-center bg-redBrown-950 text-white\">Loading...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-redBrown-950 p-8\">\r\n            <div className=\"max-w-4xl mx-auto\">\r\n                <div className=\"flex items-center justify-between mb-8\">\r\n                    <h1 className=\"text-3xl font-bold text-white\">Regions Management</h1>\r\n                    <button\r\n                        onClick={() => router.push('/admin')}\r\n                        className=\"px-4 py-2 bg-redBrown-800 text-white rounded-lg hover:bg-redBrown-700\"\r\n                    >\r\n                        ‚Üê Back\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Form */}\r\n                <div className=\"bg-redBrown-900/80 border-2 border-redBrown-700/50 rounded-2xl p-6 mb-8\">\r\n                    <h2 className=\"text-xl font-bold text-white mb-4\">\r\n                        {editingId ? 'Edit Region' : 'Add Region'}\r\n                    </h2>\r\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-redBrown-200 mb-2\">Slug (ID)</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={slug}\r\n                                onChange={(e) => setSlug(e.target.value)}\r\n                                required\r\n                                disabled={!!editingId}\r\n                                className=\"w-full px-4 py-2 bg-redBrown-800 border border-redBrown-600 rounded-lg text-white disabled:opacity-50\"\r\n                                placeholder=\"bangkalan\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-redBrown-200 mb-2\">Name</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={name}\r\n                                onChange={(e) => setName(e.target.value)}\r\n                                required\r\n                                className=\"w-full px-4 py-2 bg-redBrown-800 border border-redBrown-600 rounded-lg text-white\"\r\n                                placeholder=\"Bangkalan\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-redBrown-200 mb-2\">Short Description</label>\r\n                            <textarea\r\n                                value={shortDescription}\r\n                                onChange={(e) => setShortDescription(e.target.value)}\r\n                                required\r\n                                rows={2}\r\n                                className=\"w-full px-4 py-2 bg-redBrown-800 border border-redBrown-600 rounded-lg text-white\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-redBrown-200 mb-2\">History & Function</label>\r\n                            <textarea\r\n                                value={history}\r\n                                onChange={(e) => setHistory(e.target.value)}\r\n                                required\r\n                                rows={4}\r\n                                className=\"w-full px-4 py-2 bg-redBrown-800 border border-redBrown-600 rounded-lg text-white\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-redBrown-200 mb-2\">Character & Uniqueness</label>\r\n                            <textarea\r\n                                value={uniqueness}\r\n                                onChange={(e) => setUniqueness(e.target.value)}\r\n                                required\r\n                                rows={4}\r\n                                className=\"w-full px-4 py-2 bg-redBrown-800 border border-redBrown-600 rounded-lg text-white\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"px-6 py-2 bg-white text-redBrown-900 font-bold rounded-lg hover:bg-gray-100\"\r\n                            >\r\n                                {editingId ? 'Update Region' : 'Add Region'}\r\n                            </button>\r\n                            {editingId && (\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={resetForm}\r\n                                    className=\"px-6 py-2 bg-redBrown-700 text-white rounded-lg hover:bg-redBrown-600\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n                {/* Regions List */}\r\n                <div className=\"space-y-4\">\r\n                    <h2 className=\"text-xl font-bold text-white\">Existing Regions ({regions.length})</h2>\r\n                    {regions.map((region) => (\r\n                        <div\r\n                            key={region.id}\r\n                            className=\"bg-redBrown-900/80 border-2 border-redBrown-700/50 rounded-xl p-4\"\r\n                        >\r\n                            <div className=\"flex items-center justify-between mb-3\">\r\n                                <h3 className=\"text-lg font-bold text-white\">{region.name}</h3>\r\n                                <div className=\"flex gap-2\">\r\n                                    <button\r\n                                        onClick={() => handleEdit(region)}\r\n                                        className=\"px-4 py-1 bg-white text-redBrown-900 font-medium rounded-lg hover:bg-gray-100 text-sm\"\r\n                                    >\r\n                                        Edit\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleDelete(region.id)}\r\n                                        className=\"px-4 py-1 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 text-sm\"\r\n                                    >\r\n                                        Delete\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            <p className=\"text-sm text-redBrown-300 mb-2\">{region.shortDescription}</p>\r\n                            <p className=\"text-xs text-redBrown-400\">Slug: {region.slug}</p>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}