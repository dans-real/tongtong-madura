module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},12866,a=>{"use strict";var b=a.i(72131);a.i(30485);var c=a.i(31052),d=a.i(20237);function e(){let[a,e]=(0,b.useState)(null),[f,g]=(0,b.useState)(!0);return(0,b.useEffect)(()=>{let a=(0,c.onAuthStateChanged)(d.auth,a=>{e(a),g(!1)});return()=>a()},[]),{user:a,loading:f}}a.s(["useAuth",()=>e])},69242,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(12866),f=a.i(20237);a.i(69387);var g=a.i(60574);a.i(60121);var h=a.i(5420);function i(){let a=(0,d.useRouter)(),{user:i,loading:j}=(0,e.useAuth)(),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!1);(0,c.useEffect)(()=>{j||i||a.push("/admin")},[i,j,a]),(0,c.useEffect)(()=>{if(!i)return;let a=(0,g.query)((0,g.collection)(f.db,"gallery"),(0,g.orderBy)("createdAt","desc")),b=(0,g.onSnapshot)(a,a=>{let b=[];a.forEach(a=>{b.push({id:a.id,...a.data()})}),l(b)});return()=>b()},[i]);let E=()=>{r(null),t(""),v(""),x(""),z(""),B([]),n(!1),p(null)},F=async a=>{console.log("ðŸ“ File info:",{name:a.name,size:(a.size/1024).toFixed(2)+" KB",type:a.type});try{console.log("ðŸ“¤ Uploading to Firebase Storage...");let b=Date.now(),c=a.name.replace(/[^a-zA-Z0-9.]/g,"_"),d=`gallery/${b}_${c}`,e=(0,h.ref)(f.storage,d),g=await (0,h.uploadBytes)(e,a);console.log("ðŸ“¥ Upload complete:",g.metadata.fullPath);let i=await (0,h.getDownloadURL)(g.ref);return console.log("âœ… Download URL:",i),i}catch(a){if(console.error("âŒ Upload error:",a),"storage/unauthorized"===a.code)throw Error("Tidak memiliki izin upload. Periksa Firebase Storage Rules.");if("storage/canceled"===a.code)throw Error("Upload dibatalkan.");if("storage/unknown"===a.code)throw Error("Terjadi kesalahan. Periksa koneksi internet Anda.");throw Error(a.message||"Gagal upload gambar ke Firebase Storage")}},G=async a=>{if(a.preventDefault(),!m&&!q)return void alert("Please select an image to upload");D(!0);try{let a=u;if(q)try{a=await F(q)}catch(a){console.error("Image upload failed:",a),alert(`âŒ Gagal upload gambar: ${a.message}

Solusi:
1. Cek koneksi internet
2. Pastikan Firebase Storage sudah aktif
3. Periksa Storage Rules di Firebase Console`),D(!1);return}if(m&&o){let b=(0,g.doc)(f.db,"gallery",o),c={title:w,caption:y,tags:A,updatedAt:g.Timestamp.now()};q&&(c.imageUrl=a),await (0,g.updateDoc)(b,c),alert("Gallery item updated!")}else await (0,g.addDoc)((0,g.collection)(f.db,"gallery"),{imageUrl:a,title:w,caption:y,tags:A,createdAt:g.Timestamp.now(),updatedAt:g.Timestamp.now()}),alert("Gallery item added!");E()}catch(a){console.error("Error saving gallery item:",a),alert("Error saving item")}finally{D(!1)}},H=async a=>{if(confirm("Are you sure you want to delete this item?"))try{await (0,g.deleteDoc)((0,g.doc)(f.db,"gallery",a)),alert("Item deleted!")}catch(a){console.error("Error deleting item:",a),alert("Error deleting item")}};return j?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-redBrown-950 text-white",children:"Loading..."}):i?(0,b.jsx)("div",{className:"min-h-screen bg-redBrown-950 p-8",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Gallery Management"}),(0,b.jsx)("button",{onClick:()=>a.push("/admin"),className:"px-4 py-2 bg-redBrown-800 text-white rounded-lg hover:bg-redBrown-700",children:"â† Back to Dashboard"})]}),(0,b.jsxs)("div",{className:"bg-redBrown-900/80 border-2 border-redBrown-700/50 rounded-2xl p-6 mb-8",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:m?"Edit Item":"Add New Item"}),(0,b.jsxs)("form",{onSubmit:G,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-redBrown-200 mb-2",children:["Upload Image ",!m&&(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){if(b.size>0x2000000){alert("âŒ File terlalu besar!\n\nUkuran maksimal: 32MB\nUkuran file Anda: "+(b.size/1048576).toFixed(2)+"MB\n\nSolusi: Kompres gambar terlebih dahulu"),a.target.value="";return}if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(b.type)){alert("âŒ Format file tidak didukung!\n\nFormat yang diterima: JPG, PNG, GIF, WebP\nFormat file Anda: "+b.type),a.target.value="";return}r(b);let c=new FileReader;c.onloadend=()=>{t(c.result)},c.readAsDataURL(b)}},className:"w-full px-4 py-2 bg-redBrown-800 border border-redBrown-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-cyan-500 file:text-white hover:file:bg-cyan-600"}),s&&(0,b.jsxs)("div",{className:"mt-3 relative aspect-video bg-redBrown-800 rounded-lg overflow-hidden border-2 border-cyan-400",children:[(0,b.jsx)("img",{src:s,alt:"Preview",className:"w-full h-full object-cover"}),(0,b.jsx)("div",{className:"absolute top-2 right-2 bg-cyan-500 text-white px-3 py-1 rounded-lg text-xs font-bold",children:"Preview"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-redBrown-200 mb-2",children:"Title"}),(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),required:!0,className:"w-full px-4 py-2 bg-redBrown-800 border border-redBrown-600 rounded-lg text-white",placeholder:"Photo title"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-redBrown-200 mb-2",children:"Caption"}),(0,b.jsx)("textarea",{value:y,onChange:a=>z(a.target.value),required:!0,rows:3,className:"w-full px-4 py-2 bg-redBrown-800 border border-redBrown-600 rounded-lg text-white",placeholder:"Photo caption"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-redBrown-200 mb-2",children:"Wilayah Tags (Pilih wilayah yang sesuai)"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["Bangkalan","Sampang","Pamekasan","Sumenep"].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>{B(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},className:`px-4 py-3 rounded-lg font-semibold transition-all border-2 ${A.includes(a)?"bg-cyan-500 text-white border-cyan-400 shadow-lg shadow-cyan-400/30":"bg-redBrown-800 text-white border-redBrown-600 hover:border-cyan-400/50"}`,children:a},a))}),(0,b.jsx)("p",{className:"text-xs text-redBrown-400 mt-2",children:A.length>0?`Selected: ${A.join(", ")}`:"Belum ada wilayah dipilih"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"submit",disabled:C,className:"px-6 py-2 bg-cyan-500 text-white font-bold rounded-lg hover:bg-cyan-600 border-2 border-cyan-400 shadow-lg shadow-cyan-400/30 disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Uploading...":m?"Update Item":"Add Item"}),m&&(0,b.jsx)("button",{type:"button",onClick:E,className:"px-6 py-2 bg-redBrown-700 text-white rounded-lg hover:bg-redBrown-600",children:"Cancel"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-white mb-4",children:["Existing Items (",k.length,")"]}),(0,b.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:k.map(a=>(0,b.jsxs)("div",{className:"bg-redBrown-900/80 border-2 border-redBrown-700/50 rounded-xl p-4 space-y-3",children:[(0,b.jsx)("div",{className:"aspect-video bg-redBrown-800 rounded-lg overflow-hidden",children:(0,b.jsx)("img",{src:a.imageUrl,alt:a.title,className:"w-full h-full object-cover"})}),(0,b.jsx)("h3",{className:"text-lg font-bold text-white",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-redBrown-300",children:a.caption}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:a.tags.map(a=>(0,b.jsx)("span",{className:"px-3 py-1 bg-amber-400/90 border-2 border-amber-300 rounded-full text-xs text-redBrown-950 font-bold",children:a},a))}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,b.jsx)("button",{onClick:()=>{v(a.imageUrl),t(a.imageUrl),x(a.title),z(a.caption),B(a.tags||[]),n(!0),p(a.id)},className:"flex-1 px-4 py-2 bg-cyan-500 text-white font-medium rounded-lg hover:bg-cyan-600 border-2 border-cyan-400",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>H(a.id),className:"flex-1 px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 border-2 border-red-500",children:"Delete"})]})]},a.id))})]})]})}):null}a.s(["default",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__88fc30c7._.js.map