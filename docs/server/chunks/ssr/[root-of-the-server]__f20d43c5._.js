module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},12866,a=>{"use strict";var b=a.i(72131);a.i(30485);var c=a.i(31052),d=a.i(20237);function e(){let[a,e]=(0,b.useState)(null),[f,g]=(0,b.useState)(!0);return(0,b.useEffect)(()=>{let a=(0,c.onAuthStateChanged)(d.auth,a=>{e(a),g(!1)});return()=>a()},[]),{user:a,loading:f}}a.s(["useAuth",()=>e])},49276,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(12866),f=a.i(20237);a.i(69387);var g=a.i(60574);a.i(60121);var h=a.i(5420);function i(){let a=(0,d.useRouter)(),{user:i,loading:j}=(0,e.useAuth)(),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1);(0,c.useEffect)(()=>{j||i||a.push("/admin")},[i,j,a]),(0,c.useEffect)(()=>{if(!i)return;let a=(0,g.query)((0,g.collection)(f.db,"explore"),(0,g.orderBy)("createdAt","desc")),b=(0,g.onSnapshot)(a,a=>{let b=[];a.forEach(a=>{b.push({id:a.id,...a.data()})}),l(b)});return()=>b()},[i]);let E=()=>{r(null),t(""),v(""),x(""),z(""),B(""),n(!1),p(null)},F=async a=>{try{let b=Date.now(),c=a.name.replace(/[^a-zA-Z0-9.]/g,"_"),d=`explore/${b}_${c}`,e=(0,h.ref)(f.storage,d),g=await (0,h.uploadBytes)(e,a);return await (0,h.getDownloadURL)(g.ref)}catch(a){if(console.error("Upload error:",a),"storage/unauthorized"===a.code)throw Error("Firebase Storage belum aktif. Aktifkan dulu di Firebase Console.");throw Error(a.message||"Gagal upload gambar")}},G=async a=>{if(a.preventDefault(),!m&&!q)return void alert("Pilih gambar terlebih dahulu");D(!0);try{let a=u;if(q)try{a=await F(q)}catch(a){alert(`âŒ Gagal upload gambar: ${a.message}`),D(!1);return}if(m&&o){let b=(0,g.doc)(f.db,"explore",o),c={title:w,informasi:y,referensi:A,updatedAt:g.Timestamp.now()};q&&(c.imageUrl=a),await (0,g.updateDoc)(b,c),alert("âœ… Konten berhasil diupdate!")}else await (0,g.addDoc)((0,g.collection)(f.db,"explore"),{imageUrl:a,title:w,informasi:y,referensi:A,createdAt:g.Timestamp.now(),updatedAt:g.Timestamp.now()}),alert("âœ… Konten berhasil ditambahkan!");E()}catch(a){console.error("Error saving content:",a),alert("âŒ Error menyimpan konten")}finally{D(!1)}},H=async a=>{if(confirm("Hapus konten ini?"))try{await (0,g.deleteDoc)((0,g.doc)(f.db,"explore",a)),alert("âœ… Konten berhasil dihapus!")}catch(a){alert("âŒ Gagal menghapus konten")}};return j||!i?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-redBrown-950 text-white",children:"Loading..."}):(0,b.jsx)("div",{className:"min-h-screen bg-redBrown-950 p-8",children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Kelola Konten Explore"}),(0,b.jsx)("button",{onClick:()=>a.push("/admin"),className:"px-4 py-2 bg-redBrown-800 text-white rounded-lg hover:bg-redBrown-700 border-2 border-redBrown-600",children:"â† Kembali"})]}),(0,b.jsxs)("div",{className:"bg-redBrown-900/80 border-2 border-emerald-500/50 rounded-2xl p-6 mb-8",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:m?"âœï¸ Edit Artikel":"âž• Tambah Artikel Baru"}),(0,b.jsxs)("form",{onSubmit:G,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-emerald-300 mb-2",children:"Foto Artikel *"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){if(b.size>0xa00000){alert("âŒ File terlalu besar! Maksimal 10MB"),a.target.value="";return}if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(b.type)){alert("âŒ Format file tidak didukung! Gunakan: JPG, PNG, WebP"),a.target.value="";return}r(b);let c=new FileReader;c.onloadend=()=>{t(c.result)},c.readAsDataURL(b)}},className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-emerald-500 file:text-white hover:file:bg-emerald-600"}),s&&(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)("img",{src:s,alt:"Preview",className:"w-full max-w-md h-48 object-cover rounded-lg border-2 border-emerald-500/50"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-emerald-300 mb-2",children:"Judul Artikel *"}),(0,b.jsx)("input",{type:"text",value:w,onChange:a=>x(a.target.value),required:!0,className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white focus:border-emerald-400 focus:outline-none",placeholder:"Contoh: Sejarah Tong-Tong Madura"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-emerald-300 mb-2",children:"Informasi (Konten Artikel) *"}),(0,b.jsx)("textarea",{value:y,onChange:a=>z(a.target.value),required:!0,rows:12,className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white focus:border-emerald-400 focus:outline-none",placeholder:"Tulis konten artikel lengkap di sini..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-emerald-300 mb-2",children:"Referensi / Sumber *"}),(0,b.jsx)("textarea",{value:A,onChange:a=>B(a.target.value),required:!0,rows:4,className:"w-full px-4 py-2 bg-redBrown-800 border-2 border-redBrown-600 rounded-lg text-white focus:border-emerald-400 focus:outline-none",placeholder:"Daftar sumber/referensi, pisahkan dengan enter"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",disabled:C,className:"px-8 py-3 bg-emerald-500 text-white font-bold rounded-lg hover:bg-emerald-600 border-2 border-emerald-400 shadow-lg shadow-emerald-400/30 disabled:opacity-50",children:C?"â³ Uploading...":m?"ðŸ’¾ Update Artikel":"âž• Simpan Artikel"}),m&&(0,b.jsx)("button",{type:"button",onClick:E,className:"px-6 py-3 bg-redBrown-700 text-white font-semibold rounded-lg hover:bg-redBrown-600 border-2 border-redBrown-500",children:"âŒ Batal"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["ðŸ“š Daftar Artikel (",k.length,")"]}),0===k.length?(0,b.jsx)("div",{className:"text-center py-12 bg-redBrown-900/50 border-2 border-redBrown-700/50 rounded-xl",children:(0,b.jsx)("p",{className:"text-redBrown-300",children:"Belum ada artikel. Tambahkan artikel pertama di atas."})}):k.map(a=>(0,b.jsx)("div",{className:"bg-redBrown-900/80 border-2 border-emerald-600/30 rounded-xl p-5 hover:border-emerald-500/50 transition-all",children:(0,b.jsxs)("div",{className:"flex gap-5",children:[(0,b.jsx)("img",{src:a.imageUrl,alt:a.title,className:"w-40 h-40 object-cover rounded-lg border-2 border-emerald-500/50 shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-redBrown-300 line-clamp-3 mb-3 flex-1",children:a.informasi}),(0,b.jsxs)("div",{className:"text-xs text-redBrown-400 mb-3",children:[(0,b.jsx)("strong",{children:"Referensi:"})," ",a.referensi.substring(0,100),"..."]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{v(a.imageUrl),t(a.imageUrl),x(a.title),z(a.informasi),B(a.referensi),n(!0),p(a.id),window.scrollTo({top:0,behavior:"smooth"})},className:"px-4 py-2 bg-emerald-500 text-white text-sm font-semibold rounded hover:bg-emerald-600 border-2 border-emerald-400",children:"âœï¸ Edit"}),(0,b.jsx)("button",{onClick:()=>H(a.id),className:"px-4 py-2 bg-red-600 text-white text-sm font-semibold rounded hover:bg-red-700 border-2 border-red-500",children:"ðŸ—‘ï¸ Hapus"})]})]})]})},a.id))]})]})})}a.s(["default",()=>i])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f20d43c5._.js.map